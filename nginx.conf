# Configuración de ejemplo de Nginx para una aplicación React (Vite)
# Asegúrate de reemplazar los valores de ejemplo con los de tu servidor.

server {
  # Escucha en el puerto 80 para el tráfico HTTP
  listen 80;

  # Reemplaza 'klywo.com' con tu nombre de dominio real
  server_name klywo.com;

  # IMPORTANTE:
  # Apunta a la carpeta 'disq' que se genera después de ejecutar 'npm run build'.
  # Reemplaza '/var/www/your-project-path' con la ruta absoluta a tu proyecto en el VPS.
  # Por ejemplo: /home/ubuntu/klywo-sparkle-launch-main/disq
  root /www/wwwroot/klywo.com;
  
  # El archivo principal que Nginx buscará.
  index index.html;

  # Configuración para manejar el enrutamiento del lado del cliente (React Router)
  location / {
    # Intenta servir el archivo solicitado directamente ($uri).
    # Si es un directorio, intenta servir un archivo index dentro de él ($uri/).
    # Si ninguno de los anteriores funciona, devuelve /index.html.
    # Esto permite que React Router se encargue de la ruta.
    try_files $uri $uri/ /index.html;
  }

  # Opcional: Configuración para servir assets con cabeceras de caché eficientes
  location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc)$ {
    expires 1M;
    access_log off;
    add_header Cache-Control "public";
  }

  location ~* \.(?:css|js)$ {
    expires 1y;
    access_log off;
    add_header Cache-Control "public";
  }
}